<!DOCTYPE html>
<html>
    <head>

    <link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap.min.css">
    <link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap-theme.min.css">
    <script src="//ajax.googleapis.com/ajax/libs/jquery/2.1.0/jquery.min.js"></script>

    <style>
        .tituloColuna {
            font-weight: bold;
        }
        .esquerda {
            text-align: left;
        }
        .centro {
            text-align: center;
        }
    </style>

    <script>
    	window.setTimeout('document.location.reload()', 10000);

        $(function() {
    		$.ajax({
    			url: "/services/listaDeAprovacoes",
    			type: "GET", 
    			success: function(data) {
    				var i = 0;
    				var html = "";
    				for (i; i< data.length; i++) {
    					html += "<tr>";
    					html += "<td class='esquerda'>";
    					html += "Mesa N.º " + data[i].numeroDaMesa; 
    					html += "</td>";

    					html += "<td class='esquerda'>";
    					html += data[i].nomeProduto; 
    					html += "</td>";

    					html += "<td class='centro'>";
    					html += "<span data-id='" + data[i].codigo + "'>";
    					html += "<img src='static/img/aprovar.png'/>";
    					html += "</span>";
    					html += "</td>";

    					html += "</tr>";
    				}
    				var tbody = $("#bodyListaAprovacao");
    				tbody.html(html);
    				tbody.find("span").click(function() {
    		    		$.ajax({
    		    			url: "/services/aprovar",
    		    			type: "POST",
    		    			data: "codRequisicao=" + $(this).data("id"),
    		    			success: function() {
    		    				window.location.reload();
    		    			}
    		    		});
    				});
    			}
    		});
        });
    </script>
    </head>
    <body>
        <form action="/aprovar" method="post">
            <div style="text-align: center; width: 100%;">
                <span style="font-size: 16pt; font-weight: bold;;">
                    Aprovação de compras
                </span>
                <table class="table table-striped" id="listaAprovacao" style="margin: 10px;">
                    <thead>
                        <tr>
                            <td class="tituloColuna esquerda">
                                Mesa
                            </td>
                            <td class="tituloColuna esquerda">
                                Produto
                            </td>
                            <td class="tituloColuna centro">
                                Aprovar
                            </td>
                        </tr>
                    </thead>
                    <tbody id="bodyListaAprovacao">
                    </tbody>
                </table>
            </div>
        </form>
    </body>
</html>